{"remainingRequest":"D:\\Snackstore\\node_modules\\babel-loader\\lib\\index.js!D:\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Snackstore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Snackstore\\src\\components\\CommodityCommentList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Snackstore\\src\\components\\CommodityCommentList.vue","mtime":1624836882000},{"path":"D:\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Snackstore\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Snackstore\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:/Snackstore/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations, mapState } from 'vuex';\nimport CommodityCommentListItem from \"./CommodityCommentListItem\";\nexport default {\n  name: 'CommodityCommentList',\n  data: function data() {\n    return {\n      dialogVisible: false,\n      evaluation1: \"\",\n      score: null,\n      colors: ['#99A9BF', '#F7BA2A', '#FF9900'] //星级评定不同分数的颜色\n\n    };\n  },\n  computed: _objectSpread(_objectSpread(_objectSpread({}, mapState('user', ['user'])), mapState({\n    comments: 'evaluation'\n  })), {}, {\n    message: function message() {\n      return this.comments.length === 0 ? '当前没有任何评论！' : '';\n    }\n  }),\n  components: {\n    CommodityCommentListItem: CommodityCommentListItem\n  },\n  created: function created() {\n    var _this = this;\n\n    var url = \"/commodityEvaluation\" + this.$route.path;\n\n    if (url.indexOf(\"/shop/commodity\") != -1) {\n      url = \"/commodityEvaluation/commodity/\" + this.$route.params.id;\n    }\n\n    this.axios.get(url, {\n      params: {\n        page: 1\n      }\n    }).then(function (response) {\n      if (response.status == 200) {\n        _this.getEvaluation(response.data.data.records);\n      }\n    }).catch(function (error) {\n      return alert(error);\n    });\n  },\n  methods: _objectSpread(_objectSpread({\n    //写评论\n    writeComment: function writeComment() {\n      if (this.user) this.dialogVisible = true;else this.$router.push(\"/login\");\n    },\n    addSubmit: function addSubmit() {\n      var _this2 = this;\n\n      var data = {};\n      data.commodityId = this.$route.params.id;\n      data.score = this.score;\n      data.evaluation = this.evaluation1;\n      data.userId = this.user.id;\n      this.axios.post(\"/commodityEvaluation\", data).then(function (response) {\n        if (response.data.code == 0) {\n          _this2.addEvaluation(data);\n\n          _this2.dialogVisible = false;\n\n          _this2.$message({\n            type: 'success',\n            message: \"评论成功！\"\n          });\n        }\n      });\n    }\n  }, mapMutations(['addEvaluation', 'getEvaluation'])), {}, {\n    handleClose: function handleClose(done) {\n      this.$confirm('确认关闭？').then(function () {\n        done();\n      }).catch(function () {});\n    }\n  })\n};",{"version":3,"sources":["CommodityCommentList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,SAAA,YAAA,EAAA,QAAA,QAAA,MAAA;AACA,OAAA,wBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,sBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,IAHA;AAIA,MAAA,MAAA,EAAA,CAAA,SAAA,EAAA,SAAA,EAAA,SAAA,CAJA,CAIA;;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,QAAA,gDACA,QAAA,CAAA,MAAA,EAAA,CAAA,MAAA,CAAA,CADA,GAEA,QAAA,CAAA;AAAA,IAAA,QAAA,EAAA;AAAA,GAAA,CAFA;AAGA,IAAA,OAHA,qBAGA;AACA,aAAA,KAAA,QAAA,CAAA,MAAA,KAAA,CAAA,GAAA,WAAA,GAAA,EAAA;AACA;AALA,IAVA;AAiBA,EAAA,UAAA,EAAA;AACA,IAAA,wBAAA,EAAA;AADA,GAjBA;AAqBA,EAAA,OArBA,qBAqBA;AAAA;;AACA,QAAA,GAAA,GAAA,yBAAA,KAAA,MAAA,CAAA,IAAA;;AACA,QAAA,GAAA,CAAA,OAAA,CAAA,iBAAA,KAAA,CAAA,CAAA,EAAA;AACA,MAAA,GAAA,GAAA,oCAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA;;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AAAA,MAAA,MAAA,EAAA;AAAA,QAAA,IAAA,EAAA;AAAA;AAAA,KAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,UAAA,QAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,aAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA;AACA,KALA,EAMA,KANA,CAMA,UAAA,KAAA;AAAA,aAAA,KAAA,CAAA,KAAA,CAAA;AAAA,KANA;AAOA,GAjCA;AAmCA,EAAA,OAAA;AACA;AACA,IAAA,YAFA,0BAEA;AACA,UAAA,KAAA,IAAA,EACA,KAAA,aAAA,GAAA,IAAA,CADA,KAGA,KAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,KAPA;AASA,IAAA,SATA,uBASA;AAAA;;AACA,UAAA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,CAAA,WAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,MAAA,IAAA,CAAA,KAAA,GAAA,KAAA,KAAA;AACA,MAAA,IAAA,CAAA,UAAA,GAAA,KAAA,WAAA;AACA,MAAA,IAAA,CAAA,MAAA,GAAA,KAAA,IAAA,CAAA,EAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,sBAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,aAAA,CAAA,IAAA;;AACA,UAAA,MAAA,CAAA,aAAA,GAAA,KAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;AAIA;AACA,OATA;AAUA;AAzBA,KA2BA,YAAA,CAAA,CAAA,eAAA,EAAA,eAAA,CAAA,CA3BA;AA6BA,IAAA,WA7BA,uBA6BA,IA7BA,EA6BA;AACA,WAAA,QAAA,CAAA,OAAA,EACA,IADA,CACA,YAAA;AACA,QAAA,IAAA;AACA,OAHA,EAIA,KAJA,CAIA,YAAA,CAAA,CAJA;AAKA;AAnCA;AAnCA,CAAA","sourcesContent":["<template>\r\n  <div class=\"comment\">\r\n    <h3 v-if=\"comments.length==0\">当前没有任何评论！</h3>\r\n    <div v-if=\"user\">\r\n      <el-button class=\"commentbt\" size=\"mini\" @click=\"writeComment\">写评论</el-button>\r\n      <el-dialog\r\n        title=\"写评论\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\"\r\n        :before-close=\"handleClose\">\r\n        <span>好评度：</span><el-rate v-model=\"score\" :colors=\"colors\"></el-rate>\r\n        <el-input\r\n            type=\"textarea\"\r\n            :autosize=\"{ minRows: 3, maxRows: 5}\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"evaluation1\">\r\n        </el-input>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addSubmit\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n    <CommodityCommentListItem \r\n      v-for=\"comment in comments\" \r\n      :item=\"comment\" \r\n      :key=\"comment.id\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapState } from 'vuex';\r\n  import CommodityCommentListItem from './CommodityCommentListItem'\r\n  \r\n  export default {\r\n    name: 'CommodityCommentList',\r\n    data () {\r\n      return {\r\n        dialogVisible:false,\r\n        evaluation1:\"\",\r\n        score: null,\r\n        colors: ['#99A9BF', '#F7BA2A', '#FF9900']   //星级评定不同分数的颜色\r\n      };\r\n    },\r\n    computed:{\r\n      ...mapState('user',['user']),\r\n      ...mapState({comments:'evaluation'}),\r\n      message(){\r\n        return this.comments.length === 0 ? '当前没有任何评论！' : '';\r\n      }\r\n    },\r\n    components: {\r\n      CommodityCommentListItem,\r\n    },\r\n\r\n    created(){\r\n      let url = \"/commodityEvaluation\"+this.$route.path;\r\n      if(url.indexOf(\"/shop/commodity\")!=-1){\r\n          url = \"/commodityEvaluation/commodity/\"+this.$route.params.id;\r\n      }\r\n      this.axios.get(url,{params:{page:1}})\r\n          .then(response => {\r\n            if(response.status == 200){              \r\n              this.getEvaluation(response.data.data.records);\r\n            }\r\n          })\r\n          .catch(error => alert(error));\r\n    },\r\n\r\n    methods:{\r\n      //写评论\r\n      writeComment(){\r\n        if(this.user)\r\n          this.dialogVisible = true\r\n        else\r\n          this.$router.push(\"/login\")\r\n      },\r\n\r\n      addSubmit(){\r\n        var data = {};\r\n        data.commodityId = this.$route.params.id;\r\n        data.score = this.score;\r\n        data.evaluation = this.evaluation1;\r\n        data.userId = this.user.id;\r\n        this.axios.post(\"/commodityEvaluation\",data).then(response => {\r\n            if(response.data.code == 0){\r\n              this.addEvaluation(data);\r\n              this.dialogVisible  = false;\r\n              this.$message({\r\n                type: 'success',\r\n                message: \"评论成功！\"\r\n              })  \r\n            }\r\n        })\r\n      },\r\n\r\n      ...mapMutations(['addEvaluation','getEvaluation']),\r\n\r\n       handleClose(done) {\r\n        this.$confirm('确认关闭？')\r\n          .then(() => {\r\n            done();\r\n          })\r\n          .catch(() => {});\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n<style scoped>\r\n.comment{\r\n  position: relative;\r\n}\r\n.comment .commentbt{\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 50px;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}