{"remainingRequest":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\babel-loader\\lib\\index.js!D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SpringBootVueSecondShop\\client\\Snackstore\\src\\views\\admin\\RechargeManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\src\\views\\admin\\RechargeManagement.vue","mtime":1624836882000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"recharge\",\n  data: function data() {\n    var _this = this;\n\n    var checkRechargeAmount = function checkRechargeAmount(rule, value, callback) {\n      if (_this.rechargeAmount == \"\") {\n        return callback(new Error('充值金额不能为空'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      form: {\n        //要查询的用户\n        name: \"\",\n        identity: \"user\"\n      },\n      infoForm: {},\n      //无用 为了使用表单的验证\n      currentIdentity: \"\",\n      userInfo: null,\n      //查询得到的用户信息\n      rechargeAmount: \"\",\n      //充值金额\n      rules: {\n        rechargeAmount: [{\n          validator: checkRechargeAmount,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    searchUser: function searchUser() {\n      var _this2 = this;\n\n      this.axios.post(\"/\" + this.form.identity, {\n        \"name\": this.form.name\n      }).then(function (response) {\n        if (response.data.code == 0) {\n          console.log(response.data.data.length);\n\n          if (response.data.data.length == 1) {\n            _this2.userInfo = response.data.data[0];\n            _this2.currentIdentity = _this2.form.identity;\n\n            _this2.$refs[\"form\"].resetFields();\n          } else {\n            _this2.$message(\"对不起，没有此用户！\");\n          }\n        } else {\n          _this2.$message(\"查询失败！\");\n        }\n      });\n    },\n    //充值\n    recharge: function recharge() {\n      var _this3 = this;\n\n      this.$refs['info'].validate(function (valid) {\n        if (valid) {\n          _this3.userInfo.wallet = Number(_this3.userInfo.wallet) + Number(_this3.rechargeAmount);\n\n          _this3.axios.post(\"/\" + _this3.currentIdentity + \"/update\", _this3.userInfo).then(function (response) {\n            if (response.data.code == 0) {\n              _this3.rechargeAmount = \"\";\n\n              _this3.$message({\n                type: 'success',\n                message: \"充值成功\"\n              });\n            }\n          }).catch(function (error) {\n            alert(error.message);\n          });\n        } else {\n          return false;\n        }\n      });\n    }\n  },\n  filters: {\n    formatIdentity: function formatIdentity(value) {\n      if (value == 'user') return \"普通用户\";else if (value == 'sell') return \"商家\";\n    }\n  }\n};",{"version":3,"sources":["RechargeManagement.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"recharge\">\r\n        <el-form ref=\"form\" :inline=\"true\" :model=\"form\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"选择用户\" prop=\"name\">\r\n            <el-input v-model=\"form.name\" placeholder=\"输入用户名\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户类型\" prop=\"identity\">\r\n            <el-select v-model=\"form.identity\" placeholder=\"用户类型\">\r\n            <el-option label=\"普通用户\" value=\"user\"></el-option>\r\n            <el-option label=\"商家\" value=\"sell\"></el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"searchUser\">查询</el-button>\r\n        </el-form-item>\r\n        </el-form>\r\n\r\n        <div v-if=\"userInfo\" class=\"info\">\r\n            <p><span>用户名：</span>{{userInfo.name}}</p>\r\n            <p><span>类型：</span>{{currentIdentity | formatIdentity}}</p>\r\n            <p><span>账户余额：</span>{{userInfo.wallet}}</p>\r\n            <el-form  :model=\"infoForm\" ref=\"info\" :rules=\"rules\" :inline=\"true\" >\r\n                <el-form-item label=\"充值\" prop=\"rechargeAmount\">\r\n                    <el-input type=\"number\" v-model=\"rechargeAmount\" placeholder=\"输入充值金额\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"recharge\">充值</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"recharge\",\r\n    data(){\r\n        var checkRechargeAmount = (rule, value, callback) => {\r\n            if (this.rechargeAmount==\"\") {\r\n                return callback(new Error('充值金额不能为空'));\r\n            }else {\r\n                callback();\r\n            }\r\n        };\r\n        return{\r\n            form:{  //要查询的用户\r\n                name: \"\",\r\n                identity: \"user\"\r\n            }, \r\n            infoForm:{},  //无用 为了使用表单的验证\r\n            currentIdentity: \"\",\r\n            userInfo: null, //查询得到的用户信息\r\n            rechargeAmount: \"\",   //充值金额\r\n            rules:{\r\n                rechargeAmount:[{validator: checkRechargeAmount, trigger: 'blur'}]\r\n            }\r\n        }\r\n    },\r\n    methods:{\r\n        searchUser(){   \r\n            this.axios.post(\"/\"+this.form.identity,{\"name\":this.form.name}).then(response => {\r\n                if(response.data.code == 0){\r\n                    console.log(response.data.data.length)\r\n                    if(response.data.data.length == 1){\r\n                        this.userInfo = response.data.data[0];\r\n                        this.currentIdentity = this.form.identity;\r\n                        this.$refs[\"form\"].resetFields();   \r\n                    }else{\r\n                        this.$message(\"对不起，没有此用户！\")\r\n                    }\r\n                }else{\r\n                    this.$message(\"查询失败！\")\r\n                }\r\n            });\r\n        },\r\n\r\n        //充值\r\n        recharge(){\r\n            this.$refs['info'].validate((valid) => {\r\n                if (valid) {\r\n                    this.userInfo.wallet = (Number)(this.userInfo.wallet) + (Number)(this.rechargeAmount);\r\n                    this.axios.post(\"/\"+this.currentIdentity+\"/update\",this.userInfo).then(response => {\r\n                        if(response.data.code == 0){\r\n                            this.rechargeAmount = \"\";\r\n                            this.$message({\r\n                                type: 'success',\r\n                                message: \"充值成功\"\r\n                            })\r\n                        }\r\n                    }).catch(error => {alert(error.message)})\r\n                } else {\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    filters:{\r\n        formatIdentity: function(value){\r\n            if(value=='user')   return \"普通用户\"\r\n            else if(value=='sell') return \"商家\"\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.recharge{\r\n    color: #846e6e;\r\n    padding: 40px 60px;\r\n    text-align: left;\r\n}\r\n\r\n.recharge .info{\r\n    text-align: left;\r\n}\r\np{\r\n    margin: 20px 0;\r\n}\r\nspan{\r\n    color: #846e6e;\r\n}\r\n</style>"],"sourceRoot":"src/views/admin"}]}