{"remainingRequest":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SpringBootVueSecondShop\\client\\Snackstore\\src\\components\\CommodityCommentList.vue?vue&type=style&index=0&id=1b66f260&scoped=true&lang=css&","dependencies":[{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\src\\components\\CommodityCommentList.vue","mtime":1624836882000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.comment{\r\n  position: relative;\r\n}\r\n.comment .commentbt{\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 50px;\r\n}\r\n",{"version":3,"sources":["CommodityCommentList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommodityCommentList.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"comment\">\r\n    <h3 v-if=\"comments.length==0\">当前没有任何评论！</h3>\r\n    <div v-if=\"user\">\r\n      <el-button class=\"commentbt\" size=\"mini\" @click=\"writeComment\">写评论</el-button>\r\n      <el-dialog\r\n        title=\"写评论\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\"\r\n        :before-close=\"handleClose\">\r\n        <span>好评度：</span><el-rate v-model=\"score\" :colors=\"colors\"></el-rate>\r\n        <el-input\r\n            type=\"textarea\"\r\n            :autosize=\"{ minRows: 3, maxRows: 5}\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"evaluation1\">\r\n        </el-input>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addSubmit\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n    <CommodityCommentListItem \r\n      v-for=\"comment in comments\" \r\n      :item=\"comment\" \r\n      :key=\"comment.id\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapState } from 'vuex';\r\n  import CommodityCommentListItem from './CommodityCommentListItem'\r\n  \r\n  export default {\r\n    name: 'CommodityCommentList',\r\n    data () {\r\n      return {\r\n        dialogVisible:false,\r\n        evaluation1:\"\",\r\n        score: null,\r\n        colors: ['#99A9BF', '#F7BA2A', '#FF9900']   //星级评定不同分数的颜色\r\n      };\r\n    },\r\n    computed:{\r\n      ...mapState('user',['user']),\r\n      ...mapState({comments:'evaluation'}),\r\n      message(){\r\n        return this.comments.length === 0 ? '当前没有任何评论！' : '';\r\n      }\r\n    },\r\n    components: {\r\n      CommodityCommentListItem,\r\n    },\r\n\r\n    created(){\r\n      let url = \"/commodityEvaluation\"+this.$route.path;\r\n      if(url.indexOf(\"/shop/commodity\")!=-1){\r\n          url = \"/commodityEvaluation/commodity/\"+this.$route.params.id;\r\n      }\r\n      this.axios.get(url,{params:{page:1}})\r\n          .then(response => {\r\n            if(response.status == 200){              \r\n              this.getEvaluation(response.data.data.records);\r\n            }\r\n          })\r\n          .catch(error => alert(error));\r\n    },\r\n\r\n    methods:{\r\n      //写评论\r\n      writeComment(){\r\n        if(this.user)\r\n          this.dialogVisible = true\r\n        else\r\n          this.$router.push(\"/login\")\r\n      },\r\n\r\n      addSubmit(){\r\n        var data = {};\r\n        data.commodityId = this.$route.params.id;\r\n        data.score = this.score;\r\n        data.evaluation = this.evaluation1;\r\n        data.userId = this.user.id;\r\n        this.axios.post(\"/commodityEvaluation\",data).then(response => {\r\n            if(response.data.code == 0){\r\n              this.addEvaluation(data);\r\n              this.dialogVisible  = false;\r\n              this.$message({\r\n                type: 'success',\r\n                message: \"评论成功！\"\r\n              })  \r\n            }\r\n        })\r\n      },\r\n\r\n      ...mapMutations(['addEvaluation','getEvaluation']),\r\n\r\n       handleClose(done) {\r\n        this.$confirm('确认关闭？')\r\n          .then(() => {\r\n            done();\r\n          })\r\n          .catch(() => {});\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n<style scoped>\r\n.comment{\r\n  position: relative;\r\n}\r\n.comment .commentbt{\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 50px;\r\n}\r\n</style>"]}]}