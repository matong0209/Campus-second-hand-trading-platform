{"remainingRequest":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SpringBootVueSecondShop\\client\\Snackstore\\src\\views\\admin\\RechargeManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\src\\views\\admin\\RechargeManagement.vue","mtime":1624836882000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBootVueSecondShop\\client\\Snackstore\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    name:\"recharge\",\r\n    data(){\r\n        var checkRechargeAmount = (rule, value, callback) => {\r\n            if (this.rechargeAmount==\"\") {\r\n                return callback(new Error('充值金额不能为空'));\r\n            }else {\r\n                callback();\r\n            }\r\n        };\r\n        return{\r\n            form:{  //要查询的用户\r\n                name: \"\",\r\n                identity: \"user\"\r\n            }, \r\n            infoForm:{},  //无用 为了使用表单的验证\r\n            currentIdentity: \"\",\r\n            userInfo: null, //查询得到的用户信息\r\n            rechargeAmount: \"\",   //充值金额\r\n            rules:{\r\n                rechargeAmount:[{validator: checkRechargeAmount, trigger: 'blur'}]\r\n            }\r\n        }\r\n    },\r\n    methods:{\r\n        searchUser(){   \r\n            this.axios.post(\"/\"+this.form.identity,{\"name\":this.form.name}).then(response => {\r\n                if(response.data.code == 0){\r\n                    console.log(response.data.data.length)\r\n                    if(response.data.data.length == 1){\r\n                        this.userInfo = response.data.data[0];\r\n                        this.currentIdentity = this.form.identity;\r\n                        this.$refs[\"form\"].resetFields();   \r\n                    }else{\r\n                        this.$message(\"对不起，没有此用户！\")\r\n                    }\r\n                }else{\r\n                    this.$message(\"查询失败！\")\r\n                }\r\n            });\r\n        },\r\n\r\n        //充值\r\n        recharge(){\r\n            this.$refs['info'].validate((valid) => {\r\n                if (valid) {\r\n                    this.userInfo.wallet = (Number)(this.userInfo.wallet) + (Number)(this.rechargeAmount);\r\n                    this.axios.post(\"/\"+this.currentIdentity+\"/update\",this.userInfo).then(response => {\r\n                        if(response.data.code == 0){\r\n                            this.rechargeAmount = \"\";\r\n                            this.$message({\r\n                                type: 'success',\r\n                                message: \"充值成功\"\r\n                            })\r\n                        }\r\n                    }).catch(error => {alert(error.message)})\r\n                } else {\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    filters:{\r\n        formatIdentity: function(value){\r\n            if(value=='user')   return \"普通用户\"\r\n            else if(value=='sell') return \"商家\"\r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["RechargeManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RechargeManagement.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div class=\"recharge\">\r\n        <el-form ref=\"form\" :inline=\"true\" :model=\"form\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"选择用户\" prop=\"name\">\r\n            <el-input v-model=\"form.name\" placeholder=\"输入用户名\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户类型\" prop=\"identity\">\r\n            <el-select v-model=\"form.identity\" placeholder=\"用户类型\">\r\n            <el-option label=\"普通用户\" value=\"user\"></el-option>\r\n            <el-option label=\"商家\" value=\"sell\"></el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"searchUser\">查询</el-button>\r\n        </el-form-item>\r\n        </el-form>\r\n\r\n        <div v-if=\"userInfo\" class=\"info\">\r\n            <p><span>用户名：</span>{{userInfo.name}}</p>\r\n            <p><span>类型：</span>{{currentIdentity | formatIdentity}}</p>\r\n            <p><span>账户余额：</span>{{userInfo.wallet}}</p>\r\n            <el-form  :model=\"infoForm\" ref=\"info\" :rules=\"rules\" :inline=\"true\" >\r\n                <el-form-item label=\"充值\" prop=\"rechargeAmount\">\r\n                    <el-input type=\"number\" v-model=\"rechargeAmount\" placeholder=\"输入充值金额\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"recharge\">充值</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"recharge\",\r\n    data(){\r\n        var checkRechargeAmount = (rule, value, callback) => {\r\n            if (this.rechargeAmount==\"\") {\r\n                return callback(new Error('充值金额不能为空'));\r\n            }else {\r\n                callback();\r\n            }\r\n        };\r\n        return{\r\n            form:{  //要查询的用户\r\n                name: \"\",\r\n                identity: \"user\"\r\n            }, \r\n            infoForm:{},  //无用 为了使用表单的验证\r\n            currentIdentity: \"\",\r\n            userInfo: null, //查询得到的用户信息\r\n            rechargeAmount: \"\",   //充值金额\r\n            rules:{\r\n                rechargeAmount:[{validator: checkRechargeAmount, trigger: 'blur'}]\r\n            }\r\n        }\r\n    },\r\n    methods:{\r\n        searchUser(){   \r\n            this.axios.post(\"/\"+this.form.identity,{\"name\":this.form.name}).then(response => {\r\n                if(response.data.code == 0){\r\n                    console.log(response.data.data.length)\r\n                    if(response.data.data.length == 1){\r\n                        this.userInfo = response.data.data[0];\r\n                        this.currentIdentity = this.form.identity;\r\n                        this.$refs[\"form\"].resetFields();   \r\n                    }else{\r\n                        this.$message(\"对不起，没有此用户！\")\r\n                    }\r\n                }else{\r\n                    this.$message(\"查询失败！\")\r\n                }\r\n            });\r\n        },\r\n\r\n        //充值\r\n        recharge(){\r\n            this.$refs['info'].validate((valid) => {\r\n                if (valid) {\r\n                    this.userInfo.wallet = (Number)(this.userInfo.wallet) + (Number)(this.rechargeAmount);\r\n                    this.axios.post(\"/\"+this.currentIdentity+\"/update\",this.userInfo).then(response => {\r\n                        if(response.data.code == 0){\r\n                            this.rechargeAmount = \"\";\r\n                            this.$message({\r\n                                type: 'success',\r\n                                message: \"充值成功\"\r\n                            })\r\n                        }\r\n                    }).catch(error => {alert(error.message)})\r\n                } else {\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    filters:{\r\n        formatIdentity: function(value){\r\n            if(value=='user')   return \"普通用户\"\r\n            else if(value=='sell') return \"商家\"\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.recharge{\r\n    color: #846e6e;\r\n    padding: 40px 60px;\r\n    text-align: left;\r\n}\r\n\r\n.recharge .info{\r\n    text-align: left;\r\n}\r\np{\r\n    margin: 20px 0;\r\n}\r\nspan{\r\n    color: #846e6e;\r\n}\r\n</style>"]}]}