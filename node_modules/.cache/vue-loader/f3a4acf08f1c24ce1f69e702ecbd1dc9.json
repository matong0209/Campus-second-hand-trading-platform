{"remainingRequest":"D:\\Snackstore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Snackstore\\src\\views\\sell\\SellOrder.vue?vue&type=style&index=0&id=727f04ce&scoped=true&lang=css&","dependencies":[{"path":"D:\\Snackstore\\src\\views\\sell\\SellOrder.vue","mtime":1624836882000},{"path":"D:\\Snackstore\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\Snackstore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Snackstore\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Snackstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Snackstore\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.order{\n    width: 1030px;\n    margin: 0 auto;\n    margin-top: 50px;\n}\n",{"version":3,"sources":["SellOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA","file":"SellOrder.vue","sourceRoot":"src/views/sell","sourcesContent":["<template>\r\n    <div class=\"order\">\r\n        <el-table :data=\"orders\" stripe style=\"width: 100%\">\r\n            <el-table-column width=\"30\"></el-table-column>\r\n            <el-table-column prop=\"commodityId\"  label=\"商品ID\"  width=\"80\"></el-table-column>\r\n            <el-table-column prop=\"quantity\"  label=\"数量\"  width=\"80\"></el-table-column>\r\n            <el-table-column prop=\"amount\" label=\"总价\"  width=\"100\"></el-table-column>\r\n            <el-table-column  prop=\"creatTime\" label=\"订单开始时间\" width=\"200\"></el-table-column>\r\n            <el-table-column prop=\"endTime\" label=\"订单结束时间\"  width=\"200\"></el-table-column>\r\n            <el-table-column prop=\"status\" label=\"标签\" width=\"140\"\r\n                :filters=\"[{ text: '待发货', value: 2},{ text: '已收货', value: 4 },\r\n                { text: '退货待审核', value: 5 },{ text: '已完成', value: 8 }]\"\r\n                :filter-method=\"filterTag\"\r\n                filter-placement=\"bottom-end\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag\r\n                    :type=\"scope.row.status === 8 ? 'success' : 'primary'\"\r\n                    disable-transitions>{{scope.row.status | formatStatus }}</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"200\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button v-if=\"determineType(scope.row.status,'发货')\" size=\"mini\" type=\"danger\" @click=\"handleSend(scope.row)\">发货</el-button>\r\n                    <el-button v-if=\"determineType(scope.row.status,'退货')\" size=\"mini\"  @click=\"handleAgreeReturn(scope.row)\">退货</el-button>\r\n                    <el-button v-if=\"determineType(scope.row.status,'拒绝退货')\" size=\"mini\"  @click=\"handleNotAgreeReturn(scope.row)\">拒绝退货</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nexport default {\r\n    name: \"SellOrder\",\r\n    data(){\r\n        return{\r\n            orders:[],\r\n        }\r\n    },\r\n    created(){\r\n        this.axios.get(\"/order/shop/\"+this.sell.id,{params:{page:1}}).then(response => {\r\n            if(response.status == 200){\r\n                this.orders = response.data.data.records;\r\n            }\r\n        })\r\n    },\r\n    computed:{\r\n        ...mapState('user',['sell']),\r\n    },\r\n    methods:{\r\n        filterTag(value, row) {\r\n            return row.status === value;\r\n        },\r\n        //发货\r\n        handleSend(row){\r\n            this.$confirm(\"确认发货?\").then(() =>{\r\n                row.status = 3;\r\n                this.axios.post(\"/order/update\",row).then(response => {\r\n                    if(response.data.code == 0){\r\n                        this.$message({type:'success',message:\"发货成功！\"})\r\n                    }else{\r\n                        this.$message(response.data.msg)\r\n                    }\r\n                }).catch(() => {error => alert(error)});\r\n            }).catch(()=>{})\r\n        },\r\n        //同意退货\r\n        handleAgreeReturn(row){\r\n            this.$confirm(\"确认同意退货?\").then(() =>{\r\n                row.status = 6;\r\n                this.axios.post(\"/order/update\",row).then(response => {\r\n                    if(response.data.code == 0){\r\n                        this.$message({type:'success',message:\"退货成功！\"})\r\n                    }else{\r\n                        this.$message(response.data.msg)\r\n                    }\r\n                }).catch(() => {error => alert(error)});\r\n            }).catch(()=>{})\r\n        },\r\n        //拒绝退货\r\n        handleNotAgreeReturn(row){\r\n            this.$confirm(\"确认拒绝退货?\").then(() =>{\r\n                row.status = 7;\r\n                this.axios.post(\"/order/update\",row).then(response => {\r\n                    if(response.data.code == 0){\r\n                        this.$message({type:'success',message:\"拒绝退货成功！\"})\r\n                    }else{\r\n                        this.$message(response.data.msg)\r\n                    }\r\n                }).catch(() => {error => alert(error)});\r\n            }).catch(()=>{})\r\n        },\r\n\r\n        \r\n        //判断订单处于哪一阶段，显示该阶段的操作\r\n        determineType(status, operation){\r\n            if(operation == \"发货\"){\r\n                if(status == 2) return true\r\n            }else if(operation == \"退货\"){\r\n                if(status == 5) return true\r\n            }else{  //拒绝退货\r\n                if(status == 5) return true\r\n            }\r\n            return false\r\n        },\r\n    },\r\n    filters:{\r\n        formatStatus(val){\r\n            let value = \"\";\r\n            switch(val) {\r\n                case 2:\r\n                    value = \"待发货\";\r\n                    break;\r\n                case 3:\r\n                    value = \"运输中\";\r\n                    break;\r\n                case 4:\r\n                    value = \"已收货\";\r\n                    break;\r\n                case 5:\r\n                    value = \"退货待审核\";\r\n                    break;\r\n                case 6:\r\n                    value = \"已退货\";\r\n                    break;\r\n                case 7:\r\n                    value = \"拒绝退货\";\r\n                    break;\r\n                case 8:\r\n                    value = \"已完成\";\r\n                    break;                    \r\n            }\r\n            return value;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .order{\r\n        width: 1030px;\r\n        margin: 0 auto;\r\n        margin-top: 50px;\r\n    }\r\n</style>"]}]}